.row.no-gutters
  - statuses.each do |status|
    .col-md-3.col.border-gutters
      %h2.text-center
        = status.titlecase
      %ul{ class: "#{status} column sortable list-unstyled"}
        - @issues.each do |issue|
          - next if different?(issue, status, current_user)
          %li{ class: "panel cards panel-default #{status}",
               data: { owner:  @project.user.nickname,
                       repo:   @project.name,
                       number: issue.number,
                       timer: convert_time(get_time(issue.labels)),
                       timer_milliseconds: get_time(issue.labels) } }
            .panel-heading
              .issue
                %h3.panel-title.pull-right
                  \##{issue.number}
                %h3.panel-title.text-left
                  = issue.milestone.title if issue.milestone
                  = current_user.current_project unless issue.milestone
            .panel-body.card
              .well.card
                =render partial: 'shared/issue_form',
                        locals:  { project: @project, issue: issue }
              .clearfix
                = render partial: 'shared/issue_labels',
                         locals:  { issue_labels: issue.labels }
              .clearfix
                .dropup.pull-left
                  %button{ class: "dropup-btn btn btn-xs btn-default dropdown-toggle",
                           id:    "dropup-#{issue.number}",
                           'aria-expanded': "true",
                    'aria-haspopup': "true",
                    'data-toggle': "dropdown", type: "button" }
                    Labels
                    %span.caret
                  = render partial:    'shared/dropup_label_form',
                           collection: @labels,
                           locals:     { project:      @project,
                                         issue_number: issue.number,
                                         issue_labels: issue.labels }

                .dropup.pull-right
                  %button{ class: "pull-right dropup-btn btn btn-xs btn-default dropdown-toggle",
                           id:    "dropup-#{issue.number}", 'aria-expanded': "true", 'aria-haspopup': "true",
                           'data-toggle': "dropdown",
                           'data-time': convert_time(get_time(issue.labels)),
                           type: "button" }
                    = convert_time(get_time(issue.labels))
                  = render partial: 'shared/dropup_timer_form',
                    locals: { issue_number: issue.number,
                              timer_time: get_time(issue.labels) }

