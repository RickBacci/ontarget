.row.no-gutters
  .col-md-3.col.border-gutters
    %h2.text-center
      Backlog
    %ul.backlog.column.sortable.list-unstyled
      - @issues.each do |issue|
        - next if issue.repository.name != current_user.current_project
        - next unless issue.labels.any? { |label| label.name == 'backlog' }
        %li.panel.cards.panel-default.backlog{ data: { owner: @project.user.nickname,
                                                 repo: @project.name,
                                                 number: issue.number } }
          .panel-heading
            .issue
              %h3.panel-title.pull-right
                \##{issue.number}
              %h3.panel-title.text-left
                = current_user.current_project
          .panel-body.card
            .well.card
              =form_tag update_issue_path(@project.user.nickname, @project.name, issue.number),
                class: "form", id: "issue-form-#{issue.number}", method: :patch do
                = text_area_tag :title, issue.title, { rows: 1, class: "form-control noscrollbars ctrl-enter", :onkeyup => "autoGrow(this);"}
                = text_area_tag :body, issue.body, { rows: 5, class: "form-control noscrollbars ctrl-enter", :onkeyup => "autoGrow(this);"}
                = hidden_field_tag :labels, issue.labels.map { |label| label.name}
                = hidden_field_tag :project_id, @project.id

                - issue.labels.map do |label|
                  %li{ class: "btn btn-xs", style: "background-color:\##{label.color};margin-top:10px" }
                    = label.name
            %button.btn.pull-right.btn-default.btn-xs.issue-btn{:type => "submit"} Update
            .clearfix
              .dropup
                %button.dropup-btn.btn.btn-xs.btn-default.dropdown-toggle{ "id" => "dropup-#{issue.number}", "aria-expanded" => "true", "aria-haspopup" => "true", "data-toggle" => "dropdown", :type => "button"}
                  Labels
                  %span.caret
                %ul.dropdown-menu.issue-dropup-menu{"aria-labelledby" => "dropup-#{issue.number}" }
                  - issue.labels.map do |label|
                    %li{ class: "btn btn-xs", style: "background-color:\##{label.color}" }
                      = label.name

  .col-md-3.col.border-gutters
    %h2.text-center
      Ready
    %ul.ready.column.sortable.list-unstyled
      - @issues.each do |issue|
        - next if issue.repository.name != current_user.current_project
        - next unless issue.labels.any? { |label| label.name == 'ready' }
        %li.panel.cards.panel-default.ready{ data: { owner: @project.user.nickname,
                                                     repo: @project.name,
                                                     number: issue.number } }
          .panel-heading
            .issue
              %h3.panel-title.pull-right
                \##{issue.number}
              %h3.panel-title.text-left
                = current_user.current_project
          .panel-body.card
            .well.card
              =form_tag update_issue_path(@project.user.nickname, @project.name, issue.number),
                class: "form", id: "issue-form-#{issue.number}", method: :patch do
                = text_field_tag :title, issue.title, rows: 1, class: "form-control"
                = text_area_tag :body, issue.body, { rows: 5, class: "form-control noscrollbars", :onkeyup => "autoGrow(this);"}
                = hidden_field_tag :labels, issue.labels.map { |label| label.name}
                = hidden_field_tag :project_id, @project.id

                - issue.labels.map do |label|
                  %li{ class: "btn btn-xs", style: "background-color:\##{label.color};margin-top:10px" }
                    = label.name
            %button.btn.pull-right.btn-default.btn-xs.issue-btn{:type => "submit"} Update
            .clearfix
              .dropup
                %button.dropup-btn.btn.btn-xs.btn-default.dropdown-toggle{ "id" => "dropup-#{issue.number}", "aria-expanded" => "true", "aria-haspopup" => "true", "data-toggle" => "dropdown", :type => "button"}
                  Labels
                  %span.caret
                %ul.dropdown-menu.issue-dropup-menu{"aria-labelledby" => "dropup-#{issue.number}" }
                  - issue.labels.map do |label|
                    %li{ class: "btn btn-xs", style: "background-color:\##{label.color}" }
                      = label.name

  .col-md-3.col.border-gutters
    %h2.text-center
      In Progress
    %ul.in-progress.column.sortable.list-unstyled
      - @issues.each do |issue|
        - next if issue.repository.name != current_user.current_project
        - next unless issue.labels.any? { |label| label.name == 'in-progress' }
        %li.panel.cards.panel-default.in-progress{ data: { owner: @project.user.nickname,
                                                           repo: @project.name,
                                                           number: issue.number } }
          .panel-heading
            .issue
              %h3.panel-title.pull-right
                \##{issue.number}
              %h3.panel-title.text-left
                = current_user.current_project
          .panel-body.card
            .well.card
              =form_tag update_issue_path(@project.user.nickname, @project.name, issue.number),
                class: "form", id: "issue-form-#{issue.number}", method: :patch do
                = text_field_tag :title, issue.title, rows: 1, class: "form-control"
                = text_area_tag :body, issue.body, { rows: 5, class: "form-control noscrollbars", :onkeyup => "autoGrow(this);"}
                = hidden_field_tag :labels, issue.labels.map { |label| label.name}
                = hidden_field_tag :project_id, @project.id

                - issue.labels.map do |label|
                  %li{ class: "btn btn-xs", style: "background-color:\##{label.color};margin-top:10px" }
                    = label.name
            %button.btn.pull-right.btn-default.btn-xs.issue-btn{:type => "submit"} Update
            .clearfix
              .dropup
                %button.dropup-btn.btn.btn-xs.btn-default.dropdown-toggle{ "id" => "dropup-#{issue.number}", "aria-expanded" => "true", "aria-haspopup" => "true", "data-toggle" => "dropdown", :type => "button"}
                  Labels
                  %span.caret
                %ul.dropdown-menu.issue-dropup-menu{"aria-labelledby" => "dropup-#{issue.number}" }
                  - issue.labels.map do |label|
                    %li{ class: "btn btn-xs", style: "background-color:\##{label.color}" }
                      = label.name

  .col-md-3.col.border-gutters
    %h2.text-center
      Completed
    %ul.completed.column.sortable.list-unstyled
      - @issues.each do |issue|
        - next if issue.repository.name != current_user.current_project
        - next unless issue.labels.any? { |label| label.name == 'completed' }
        %li.panel.cards.panel-default.completed{ data: { owner: @project.user.nickname,
                                                         repo: @project.name,
                                                         number: issue.number } }
          .panel-heading
            .issue
              %h3.panel-title.pull-right
                \##{issue.number}
              %h3.panel-title.text-left
                = current_user.current_project
          .panel-body.card
            .well.card
              =form_tag update_issue_path(@project.user.nickname, @project.name, issue.number),
                class: "form", id: "issue-form-#{issue.number}", method: :patch do
                = text_field_tag :title, issue.title, rows: 1, class: "form-control"
                = text_area_tag :body, issue.body, { rows: 5, class: "form-control noscrollbars", :onkeyup => "autoGrow(this);"}
                = hidden_field_tag :labels, issue.labels.map { |label| label.name}
                = hidden_field_tag :project_id, @project.id

                - issue.labels.map do |label|
                  %li{ class: "btn btn-xs", style: "background-color:\##{label.color};margin-top:10px" }
                    = label.name
            %button.btn.pull-right.btn-default.btn-xs.issue-btn{:type => "submit"} Update
            .clearfix
              .dropup
                %button.dropup-btn.btn.btn-xs.btn-default.dropdown-toggle{ "id" => "dropup-#{issue.number}", "aria-expanded" => "true", "aria-haspopup" => "true", "data-toggle" => "dropdown", :type => "button"}
                  Labels
                  %span.caret
                %ul.dropdown-menu.issue-dropup-menu{"aria-labelledby" => "dropup-#{issue.number}" }
                  - issue.labels.map do |label|
                    %li{ class: "btn btn-xs", style: "background-color:\##{label.color}" }
                      = label.name
